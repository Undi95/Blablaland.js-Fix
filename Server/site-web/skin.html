<html>
<header>
    <link rel="stylesheet" href="styles.css">
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/swfobject/2.2/swfobject.js"></script>
</header>

<body>
    <topbar><a>Debug : On</a></topbar>
    <topsite>
        <img src="img/topsite.png">
        <header_info>
            <header_profil style="padding-top:8px;">
                <my_avatar>
				<br><br>
				<div class="skinviewer">
                    {{skinviewer}}
                </div>
				</my_avatar>
                <profil_login_box>
                    {{form}}
                </profil_login_box>
            </header_profil>
        </header_info>
        <menu>
            <ul>
                <li><a href = "/"><span>Le Tchat</span></a></li>
                <li><a href="/inscription"><span>Inscription</span></a></li>
                <li><a href="/info"><span>Information</span></a></li>
				<li><a href="/skin"><span>Changer de skin</span></a></li>
            </ul>
        </menu>
    </topsite>
	<content>
	<table>
<tbody>
<tr>
<td><center><img src="img/skincolor.png"><br><br></center></td>
<td><center>SkinId : <input type="number"  value="7" id="SkinID" onchange="validateinput0()" style="width:60px"><br><br>
Color 1: <input  type="number" value="1" id="C1" onchange="validateinput1()" style="width:50px">
Color 2: <input  type="number" value="1" id="C2" onchange="validateinput2()" style="width:50px">
Color 3: <input  type="number" value="89" id="C3" onchange="validateinput3()" style="width:50px">
Color 4: <input  type="number" value="45" onchange="validateinput4()" id="C4" style="width:50px">
Color 5: <input  type="number" value="45" onchange="validateinput5()" id="C5" style="width:50px"><br>
Color 6: <input  type="number" value="60" onchange="validateinput6()" id="C6" style="width:50px">
Color 7: <input  type="number" value="1" onchange="validateinput7()" id="C7" style="width:50px">
Color 8: <input  type="number" value="1" onchange="validateinput8()" id="C8" style="width:50px">
Color 9: <input  type="number" value="1" onchange="validateinput9()" id="C9" style="width:50px">
Color 10: <input  type="number" value="1" onchange="validateinput10()" id="C10" style="width:50px"></center>
<br><br>

<iframe style="margin-left:100px;" src="{{actualskin}}" height="180" width="90" id="skinviewerframeprofil"></iframe>
<div id="skindescriptionbox" style="float:right; margin-right:50px; overflow-y: auto;"><div><strong id="IDofSKIN" style="color:#ff00ff; font-size:13px; padding-bottom:7px; padding-top:5px;">{{skinname}}</strong><br><img src="/img/skinnamebar.png" style="padding-top:2px; padding-bottom:2px"><div id="skindescription">{{skindescr}}</div></div></div>

</tr>
</tbody>
</table><br><br>
<img src="img/buttons/save2.png"/><img src="img/buttons/save.png" onclick="loadSkin()"/><a id="changeskin" href="/"><img src="img/buttons/play.png"/><a>
<br><br>	SkinCode:<br><input type="text" value="" id="SkinCode" style="width:400px"><button onclick="genSkinColorId()">Create</button><button onclick="loadSkinColorId()">Load</button>
</td>

				<script>
  
  
				fetch("/skinloader?validform=OK&m={{pseudo2}}")
  .then(response63 => response63.text())
  .then(data63 => document.getElementById('SkinCode').value = data63);

  function loadSkinColorId() {
  const skinidcolornumber  = document.getElementById('SkinCode').value.split('%');  
  document.getElementById('SkinID').value = skinidcolornumber[0];
  document.getElementById('C1').value = parseInt(skinidcolornumber[1],16).toString();
  document.getElementById('C2').value = parseInt(skinidcolornumber[2],16).toString();
  document.getElementById('C3').value = parseInt(skinidcolornumber[3],16).toString();
  document.getElementById('C4').value = parseInt(skinidcolornumber[4],16).toString();
  document.getElementById('C5').value = parseInt(skinidcolornumber[5],16).toString();
  document.getElementById('C6').value = parseInt(skinidcolornumber[6],16).toString();
  document.getElementById('C7').value = parseInt(skinidcolornumber[7],16).toString();
  document.getElementById('C8').value = parseInt(skinidcolornumber[8],16).toString();
  document.getElementById('C9').value = parseInt(skinidcolornumber[9],16).toString();
  document.getElementById('C10').value = parseInt(skinidcolornumber[10],16).toString();
  var skinviewerlink2 = 'data/viewskin.swf?SHOWBIG=1&SKINID=' + skinidcolornumber[0] + '&SKINCOLOR=' + '%' + skinidcolornumber[1].toString().padStart(2, '0') + '%' + skinidcolornumber[2].toString().padStart(2, '0') + '%' + skinidcolornumber[3].toString().padStart(2, '0') + '%' + skinidcolornumber[4].toString().padStart(2, '0') + '%' + skinidcolornumber[5].toString().padStart(2, '0') + '%' + skinidcolornumber[6].toString().padStart(2, '0') + '%' + skinidcolornumber[7].toString().padStart(2, '0') + '%' + skinidcolornumber[8].toString().padStart(2, '0') + '%' + skinidcolornumber[9].toString().padStart(2, '0') + '%' + skinidcolornumber[10].toString().padStart(2, '0');
  document.getElementById('skinviewerframeprofil').src = skinviewerlink2
  
   fetch("/skindb?search=description&id_skin=" + (document.getElementById('SkinID').value - 1))
  .then(response48 => response48.text())
  .then(data48 => document.getElementById('skindescription').innerHTML = data48);
  
   fetch("/skindb?search=idofskin&id_skin=" + (document.getElementById('SkinID').value - 1))
  .then(response43 => response43.text())
  .then(data43 => document.getElementById('IDofSKIN').innerHTML = data43);
  }
  
 function genSkinColorId() {
  skin0 =  document.getElementById('SkinID').value
color1 = document.getElementById('C1').value.padStart(2, '0');
color2 = document.getElementById('C2').value.padStart(2, '0');
color3 = document.getElementById('C3').value.padStart(2, '0');
color4 = document.getElementById('C4').value.padStart(2, '0');
color5 = document.getElementById('C5').value.padStart(2, '0');
color6 = document.getElementById('C6').value.padStart(2, '0');
color7 = document.getElementById('C7').value.padStart(2, '0');
color8 = document.getElementById('C8').value.padStart(2, '0');
color9 = document.getElementById('C9').value.padStart(2, '0');
color10 = document.getElementById('C10').value.padStart(2, '0');

colorh1 = parseInt(color1, 10).toString(16)
colorh2 = parseInt(color2, 10).toString(16)
colorh3 = parseInt(color3, 10).toString(16)
colorh4 = parseInt(color4, 10).toString(16)
colorh5 = parseInt(color5, 10).toString(16)
colorh6 = parseInt(color6, 10).toString(16)
colorh7 = parseInt(color7, 10).toString(16)
colorh8 = parseInt(color8, 10).toString(16)
colorh9 = parseInt(color9, 10).toString(16)
colorh10 = parseInt(color10, 10).toString(16)
document.getElementById('SkinCode').value = skin0 + '%' + colorh1.padStart(2, '0') + '%' + colorh2.padStart(2, '0') + '%' + colorh3.padStart(2, '0') + '%' + colorh4.padStart(2, '0') + '%' + colorh5.padStart(2, '0') + '%' + colorh6.padStart(2, '0') + '%' + colorh7.padStart(2, '0') + '%' + colorh8.padStart(2, '0') + '%' + colorh9.padStart(2, '0') + '%' + colorh10.padStart(2, '0');

  }
	
				
  function loadSkin() {
  
color1 = document.getElementById('C1').value.padStart(2, '0');
color2 = document.getElementById('C2').value.padStart(2, '0');
color3 = document.getElementById('C3').value.padStart(2, '0');
color4 = document.getElementById('C4').value.padStart(2, '0');
color5 = document.getElementById('C5').value.padStart(2, '0');
color6 = document.getElementById('C6').value.padStart(2, '0');
color7 = document.getElementById('C7').value.padStart(2, '0');
color8 = document.getElementById('C8').value.padStart(2, '0');
color9 = document.getElementById('C9').value.padStart(2, '0');
color10 = document.getElementById('C10').value.padStart(2, '0');

colorh1 = parseInt(color1, 10).toString(16)
colorh2 = parseInt(color2, 10).toString(16)
colorh3 = parseInt(color3, 10).toString(16)
colorh4 = parseInt(color4, 10).toString(16)
colorh5 = parseInt(color5, 10).toString(16)
colorh6 = parseInt(color6, 10).toString(16)
colorh7 = parseInt(color7, 10).toString(16)
colorh8 = parseInt(color8, 10).toString(16)
colorh9 = parseInt(color9, 10).toString(16)
colorh10 = parseInt(color10, 10).toString(16)



	const SkinID = document.getElementById('SkinID').value;
    let loc = '/saver?session=' + {{session}} + '&color=' + '%25' + colorh1.padStart(2, '0') + '%25' + colorh2.padStart(2, '0') + '%25' + colorh3.padStart(2, '0') + '%25' + colorh4.padStart(2, '0') + '%25' + colorh5.padStart(2, '0') + '%25' + colorh6.padStart(2, '0') + '%25' + colorh7.padStart(2, '0') + '%25' + colorh8.padStart(2, '0') + '%25' + colorh9.padStart(2, '0') + '%25' + colorh10.padStart(2, '0') + '&skinId=' + document.getElementById('SkinID').value;
	let decoded = decodeURI(loc);
	fetch(decoded);

    var skinviewerlink = 'data/viewskin.swf?SHOWBIG=1&SKINID=' + SkinID + '&SKINCOLOR=' + '%' + colorh1.padStart(2, '0') + '%25' + colorh2.padStart(2, '0') + '%25' + colorh3.padStart(2, '0') + '%25' + colorh4.padStart(2, '0') + '%25' + colorh5.padStart(2, '0') + '%25' + colorh6.padStart(2, '0') + '%25' + colorh7.padStart(2, '0') + '%25' + colorh8.padStart(2, '0') + '%25' + colorh9.padStart(2, '0') + '%25' + colorh10.padStart(2, '0');
	let decoded2 = decodeURI(skinviewerlink);
	
	document.getElementById("skinviewerframeprofil").src = decoded2;
	// document.getElementById("testskin99").innerHTML = decoded;
	
   fetch("/skindb?search=description&id_skin=" + (SkinID - 1))
  .then(response99 => response99.text())
  .then(data99 => document.getElementById('skindescription').innerHTML = data99);
  
   fetch("/skindb?search=idofskin&id_skin=" + (SkinID - 1))
  .then(response2 => response2.text())
  .then(data2 => document.getElementById('IDofSKIN').innerHTML = data2);

}
  
	

				</script>
				</content>
</body>

</html>